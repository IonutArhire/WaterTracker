#:import kivy kivy
#:kivy 1.9.1
#:import Window kivy.core.window.Window 


##### Global Style #####

<TitleLabel@Label>:
    size_hint_y: None
    height: self.texture_size[1] + (self.texture_size[1]/2)
    bold: True


<Button>:
    font_size: min(root.height, root.width) * .2

<BoxLayout>:
    orientation: 'vertical'

    # canvas:
    #     Color:
    #         rgba: 0,0,0,.5
    #     Rectangle:
    #         pos: self.pos
    #         size: self.size


##### Main #####

<WaterTrackerRoot>:
    screen_manager: screen_manager

    canvas.before:
        Rectangle:
            pos: self.pos
            size: self.size
            source: './images/waterfall.jpg'
    padding: min(root.width, root.height) * .08

    ScreenManager:
        id: screen_manager
        StartScreen:
            name: 'start_screen'
        AddNewScreen:
            name: 'addnew_screen'
        StatsScreen:
            name: 'stats_screen'
        HistoryScreen:
            name: 'history_screen'
        AboutScreen:
            name: 'about_screen'
        
        
<StartScreen@Screen>:

    BoxLayout:
        spacing: min(root.width, root.height) * .02

        TitleLabel:
            text: 'Water Tracker'
            font_size: min(root.height, root.width) * .13

        Button:
            text: 'Add New'
            on_release: app.root.screen_manager.current = 'addnew_screen'
        Button:
            text: 'Stats'
            on_release: app.root.screen_manager.current = 'stats_screen'
        Button:
            text: 'History'
            on_release: app.root.screen_manager.current = 'history_screen'
        Button:
            text: 'About'
            on_release: app.root.screen_manager.current = 'about_screen'


<AddNewBtn@Button>:
    size_hint: None, None


<AddNewBtnStack@StackLayout>:
    size_hint_y: None
    height: self.minimum_height


<AddNewSection@BoxLayout>:
    spacing: 10
    size_hint_y: None
    height: self.minimum_height


<AddNewScreen@Screen>:
    BoxLayout:
        canvas:
            Color:
                rgba: 0,0,0,.5
            Rectangle:
                pos: self.pos
                size: self.size
                
        ScrollView:
            size_hint: (None, None)
            size: (root.width, root.height)

            BoxLayout:
                spacing: 10
                size_hint_y: None
                height: self.minimum_height

                AddNewSection:
                    TitleLabel:
                        text: 'Instants'
                        font_size: min(root.height, root.width) * .09

                    AddNewBtnStack:
                        AddNewBtn:
                            size: root.width * .2 + self.texture_size[0], root.height * .2
                            text: 'Drink'
                        AddNewBtn:
                            size: root.width * .2 + self.texture_size[0], root.height * .2
                            text: 'Flush'
                        AddNewBtn:
                            size: root.width * .2 + self.texture_size[0], root.height * .2
                            text: 'Washing Clothes'
                        AddNewBtn:
                            size: root.width * .2 + self.texture_size[0], root.height * .2
                            text: 'Other'

                AddNewSection:
                    TitleLabel:
                        text: 'Quantity-based'
                        font_size: min(root.height, root.width) * .09

                    AddNewBtnStack:
                        AddNewBtn:
                            size: root.width * .2 + self.texture_size[0], root.height * .2
                            text: 'Washing Dishes'
                        AddNewBtn:
                            size: root.width * .2 + self.texture_size[0], root.height * .2
                            text: 'Washing Clothes (Manually)'
                        AddNewBtn:
                            size: root.width * .2 + self.texture_size[0], root.height * .2
                            text: 'Watering Plants'
                            
                AddNewSection:
                    TitleLabel:
                        text: 'Time-based'
                        font_size: min(root.height, root.width) * .09

                    AddNewBtnStack:
                        AddNewBtn:
                            size: root.width * .2 + self.texture_size[0], root.height * .2
                            text: 'Showering'


<StatsScreenLayout@BoxLayout>:
    Button:
        text: 'sample'


<HistoryScreenLayout@BoxLayout>:
    history_list: history_list

    ScrollView:
        size_hint: (None, None)
        size: (root.width, root.height)
        GridLayout:
            id: history_list
            cols: 1
            spacing: 10
            size_hint_y: None
            height: self.minimum_height

            
<HistoryEntry@GridLayout>:
    cols: 1
    size_hint: 1, None
    height: self.minimum_height

    canvas:
        Color:
            rgba: 0,0,0,.5
        Rectangle:
            pos: self.pos
            size: self.size


<HistoryEntryLabel@Label>:
    text: 'None'
    size_hint: None, None
    halign: 'left'
    size: self.texture_size


<AboutScreen@Screen>:
    Button:
        text: 'sample' 